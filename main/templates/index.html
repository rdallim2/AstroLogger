<!DOCTYPE html>
  <html lang="en">
    <head>
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
      <title>AstroLogger</title>
    </head>
  <style>
      body {
            font-family: 'Consolas', monospace;
            background-color : #204060;
            color: white;
        }
      h1 {
        color: white;
      }
      .form-inline {
            display: flex;
            align-items: center; /* Align items vertically centered */
            gap: 1rem; /* Space between the label and select */
        }
        .form-select {
            padding-bottom: .25rem; /* Padding below the select element */
            margin-top: .5rem;
            margin-bottom: 1rem;
        }

        /* Optional: If you want to ensure the select box takes up available width */
        .form-select {
            flex: 1;
            margin-top: .5rem;
            margin-bottom: 1rem;
        }
      
  </style>
  
  <body>
    <div class="container text-center">
      <h1>AstroLogger</h1>
      <div class="row">
        <div class="container">
          <div class="row">
            <div class="col">
              <button type="button" class="btn btn-primary btn-lg active"  >Make a Submission</button>
            </div>
            <div class="col">
              <button type="button" class="btn btn-primary btn-lg disabled">View past logs   </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="form-inline mx-auto" style="width: 25%;">
      <label class="form-inline" for="inlineFormObjectName">Observation Program:</label>
        <select class="form-select mx-auto" aria-label="Default select example">
          <option value="empty" selected ></option>
          <option value="1">Constellation Hunter- Northern</option>
          <option value="2">Constellation Hunter- Southern</option>
          <option value="3">Messier Observing Program</option>
          <option value="4">Lunar Observing Program</option>
          <option value="5">Solar System Observing Program</option>
          <option value="6">Gallileo Observing Program</option>
        </select>
    </div>

    <div class="form-inline mx-auto" style="width: 25%;">
      <label class="form-inline" for="inlineFormObjectName">Object:</label>
      <input type="text" class="mx-auto" id="inlineFormObjectName" placeholder="Arcturus" style="width: 200px;">
    </div>
    <div class="container mt-4">
      <div class="col-md-6">
        <form-inline id="zipForm">
          <div class="mb-3">
            <div class="form">
              <label for="inlineFormLatitude" class="mr-2">Latitude:</label>
              <input type="text" class="mx-auto" id="inlineFormLatitude" placeholder="or zipcode" style="width: 200px;">
            </div>
          </div>
          <div class="mb-3">
            <div class="form">
              <label for="inlineFormLongitude" class="mr-2">Longitude:</label>
              <input type="text" class="mx-auto" id="inlineFormLongitude" placeholder="or zipcode" style="width: 200px;">
            </div>
          </div>
        </form>
      </div>
    </div>
    <div class="container mt-4">
      <div class="row justify-content-center">
        <div class="col-auto">
          <div class="form-inline">
            <label for="inlineFormDate" class="form-inline">Date:</label>
            <input type="text" class="mx-auto" id="inlineFromDate" placeholder="00/00/00" style="width: 200px;">
          </div>
        </div>
        <div class="col-auto">
          <div class="form-inline">
            <label for="inlineFormTime" class="mr-2">Time:</label>
            <input type="text" class="mx-auto" id="inlineFormTime" placeholder="00:00:00" style="width: 200px;">
          </div>
        </div>
      </div>
    </div>
    <div class="container mt-4">
      <div class="row justify-content-center">
        <div class="col-auto">
          <div class="form-inline">
            <label for="inlineFormSeeing" class="form-inline">Seeing:</label>
            <input type="text" class="mx-auto" id="inlineFromSeeing" placeholder="16mm 2.5x" style="width: 200px;">
          </div>
        </div>
        <div class="col-auto">
          <div class="form-inline">
            <label for="inlineFormTransparency" class="mr-2">Transparency:</label>
            <input type="text" class="mx-auto" id="inlineFormTransparency" placeholder="4" style="width: 200px;">
          </div>
        </div>
      </div>
    </div>

    <script type="text/javascript">
        function fetchCoordinates(zipCode) {
          $.ajax({
            url : '/ziptocoords',
            type: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({ zip_code: zipCode }),
            success: function(data) {
              $('#inlineFormLatitude').val(data.latitude);
              $('#inlineFormLongitude').val(data.longitude);
            },
            error: function() {
              alert('ZIP code not found or invalid.');
              $('#inlineFormLatitude').val('');
              $('#inlineFormLongitude').val('');
            }
          });
        }
        $(document).ready(function() {
        $('#inlineFormLatitude, #inlineFormLongitude').on('input', function() {
                  console.log("input recieved");
                  const input = $(this).val();

                  if (input.length === 5 && $.isNumeric(input)) { // Check if input is a 5-digit ZIP code
                      fetchCoordinates(input);
                  }
              });
      });
    
    
    </script>
  </body>
</html>